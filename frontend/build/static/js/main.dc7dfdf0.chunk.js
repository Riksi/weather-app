(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{4:function(n,t,a){n.exports=a(5)},5:function(n,t,a){"use strict";a.r(t);var e=a(0),o=a.n(e),l=a(2);window.onload=function(){var n,t,a=document.getElementById("lat"),e=document.getElementById("lon"),c=document.getElementById("near"),r=document.getElementById("clear"),s=[],u=[],i=null,g=!0,p=null;function f(){l.a.setComponentValue(function(){var n={};if(n.marker={lat:t.getLatLng().lat,lon:t.getLatLng().lng},null!==i){var a=u[i];n.ws={idx:i,lat:a.circle.getLatLng().lat,lon:a.circle.getLatLng().lng,usaf:a.data.usaf,wban:a.data.wban}}else n.ws=null;return n.for=p,n}())}function d(){u.forEach((function(t){n.removeLayer(t.circle)})),u=[],r.style.display="none",i=null,p=null}function v(n){return Math.round(n*Math.pow(10,4))/Math.pow(10,4)+""}function m(n,t,a){var e=v(n.getLatLng().lat),o=v(n.getLatLng().lng),l="Lat: ".concat(e,", Lon: ").concat(o);void 0!==t&&(l=t+"<br>"+l),void 0!==a&&(l=l+"<br>"+a),n.bindPopup(l).openPopup()}function h(n){n.closePopup()}function L(a){t.setLatLng(a).update(),n.panTo(a),m(t)}function E(){var n=function(){var n=parseFloat(a.value),t=parseFloat(e.value);return isNaN(n)||isNaN(t)?null:[n,t]}();null!==n&&(L(n),f())}function w(n){var t=n.latlng.lat,o=n.latlng.lng;a.value=t,e.value=o,console.log("click",t,o),L([t,o]),f()}[a,e].forEach((function(n){n.onfocus=function(){n.classList.add("focused")},n.onblur=function(){n.classList.remove("focused")}})),a.onchange=E,e.onchange=E,c.onclick=function(){d();var l=t.getLatLng();console.log("Showing near",l.lat,l.lng),p={lat:l.lat,lon:l.lng},r.style.display="inline-block",s.forEach((function(t,c){var r=o.a.circleMarker([t.lat,t.lon],{radius:12}).addTo(n),s="<strong>".concat(t.stname,"</strong>");s+="<br>USAF: ".concat(t.usaf,", WBAN: ").concat(t.wban);var g="Available dates: ".concat(t.start," to ").concat(t.end);r.on("mouseover",(function(){m(r,s,g)})),r.on("mouseout",(function(){h(r)})),r.on("click",(function(n){o.a.DomEvent.stopPropagation(n),console.log("circle",l.lat,l.lng);var t=r.getLatLng();L([t.lat,t.lng]),i!=c?(m(r,s,g),a.value=t.lat,e.value=t.lng,null!==i&&u[i].circle.setStyle({color:"#3388ff"}),r.setStyle({color:"#f03"}),i=c):r.openPopup(),f()})),u.push({circle:r,data:t})})),n.fitBounds(u.map((function(n){return n.circle.getLatLng()})))},r.onclick=d,l.a.events.addEventListener(l.a.RENDER_EVENT,(function(c){var r=c.detail;if(s=r.args.data,g){var u=r.args.lat,i=r.args.lon;!function(l,c){var r=[l,c];n=o.a.map("map").setView(r,10),o.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(n),n.on("click",w),(t=o.a.marker(r).addTo(n)).on("click",(function(n){m(t),o.a.DomEvent.stopPropagation(n)})),t.on("mouseover",(function(n){m(t)})),t.on("mouseout",(function(n){h(t)})),a.value=l,e.value=c}(u,i),g=!1,console.log("RENDER_EVENT:",u,i)}else{var p=parseFloat(a.value),f=parseFloat(e.value);Math.abs(p-r.args.lat)>1e-6||Math.abs(f-r.args.lon)>1e-6?console.warn("WARNING: lat and lon are not the same as the ones in the event",p,f,r.args.lat,r.args.lon):console.log("RENDER_EVENT: lat and lon are the same as the ones in the event")}l.a.setFrameHeight(1e3)})),l.a.setComponentReady(),l.a.setFrameHeight(1e3)}}},[[4,1,2]]]);
//# sourceMappingURL=main.dc7dfdf0.chunk.js.map