(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{4:function(n,t,a){n.exports=a(5)},5:function(n,t,a){"use strict";a.r(t);var e=a(0),o=a.n(e),l=a(2);window.onload=function(){var n,t,a=document.getElementById("lat"),e=document.getElementById("lon"),c=document.getElementById("near"),r=document.getElementById("clear"),u=[],s=[],i=null,g=!0,p=null;function f(){l.a.setComponentValue(function(){var n={};if(n.marker={lat:t.getLatLng().lat,lon:t.getLatLng().lng},null!==i){var a=s[i];n.ws={idx:i,lat:a.circle.getLatLng().lat,lon:a.circle.getLatLng().lng,usaf:a.data.usaf,wban:a.data.wban}}else n.ws=null;return n.for=p,n}())}function d(){s.forEach((function(t){n.removeLayer(t.circle)})),s=[],r.style.display="none",i=null,p=null}function m(n){return Math.round(n*Math.pow(10,4))/Math.pow(10,4)+""}function v(n,t,a){var e=m(n.getLatLng().lat),o=m(n.getLatLng().lng),l="Lat: ".concat(e,", Lon: ").concat(o);void 0!==t&&(l=t+"<br>"+l),void 0!==a&&(l=l+"<br>"+a),n.bindPopup(l).openPopup()}function L(n){n.closePopup()}function h(a){t.setLatLng(a).update(),n.panTo(a),v(t)}function w(){var n=function(){var n=parseFloat(a.value),t=parseFloat(e.value);return isNaN(n)||isNaN(t)?null:[n,t]}();null!==n&&(h(n),f())}function y(n){var t=n.latlng.lat,o=n.latlng.lng;a.value=t,e.value=o,h([t,o]),f()}[a,e].forEach((function(n){n.onfocus=function(){n.classList.add("focused")},n.onblur=function(){n.classList.remove("focused")}})),a.onchange=w,e.onchange=w,c.onclick=function(){d();var l=t.getLatLng();p={lat:l.lat,lon:l.lng},r.style.display="inline-block",u.forEach((function(t,l){var c=o.a.circleMarker([t.lat,t.lon],{radius:12}).addTo(n),r="<strong>".concat(t.stname,"</strong>");r+="<br>USAF: ".concat(t.usaf,", WBAN: ").concat(t.wban);var u="Available dates: ".concat(t.start," to ").concat(t.end);c.on("mouseover",(function(){v(c,r,u)})),c.on("mouseout",(function(){L(c)})),c.on("click",(function(n){o.a.DomEvent.stopPropagation(n);var t=c.getLatLng();h([t.lat,t.lng]),i!=l?(v(c,r,u),a.value=t.lat,e.value=t.lng,null!==i&&s[i].circle.setStyle({color:"#3388ff"}),c.setStyle({color:"#f03"}),i=l):c.openPopup(),f()})),s.push({circle:c,data:t})})),n.fitBounds(s.map((function(n){return n.circle.getLatLng()})))},r.onclick=d,l.a.events.addEventListener(l.a.RENDER_EVENT,(function(c){var r=c.detail;if(u=r.args.data,g){!function(l,c){var r=[l,c];n=o.a.map("map").setView(r,10),o.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(n),n.on("click",y),(t=o.a.marker(r).addTo(n)).on("click",(function(n){v(t),o.a.DomEvent.stopPropagation(n)})),t.on("mouseover",(function(n){v(t)})),t.on("mouseout",(function(n){L(t)})),a.value=l,e.value=c}(r.args.lat,r.args.lon),g=!1}else{var s=parseFloat(a.value),i=parseFloat(e.value);(Math.abs(s-r.args.lat)>1e-6||Math.abs(i-r.args.lon)>1e-6)&&console.warn("WARNING: lat and lon are not the same as the ones in the event",s,i,r.args.lat,r.args.lon)}l.a.setFrameHeight(1e3)})),l.a.setComponentReady(),l.a.setFrameHeight(1e3)}}},[[4,1,2]]]);
//# sourceMappingURL=main.59939bf5.chunk.js.map